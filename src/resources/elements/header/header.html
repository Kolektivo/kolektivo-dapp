<import from="../value-converters/small-hex-string" />
<k-app-bar>
  <k-icon-button slot="start" name="menu" type="utility-dark" click.trigger="state.sideBarOpen = !state.sideBarOpen">
  </k-icon-button>
  <div></div>
  <div slot="end">
    <k-stack if.bind="!blockChainState.walletConnected" justify-content="flex-end">
      <k-button click.trigger="connectWallet()">Connect Wallet</k-button>
    </k-stack>
    <k-stack else justify-content="flex-end" direction="row" gap="var(--spacing)">
      <k-text color="var(--white)">${i18n.tr('status-bar.badge-title')}:</k-text>
      <k-avatar-group ref="badgeGroup">
        <k-avatar repeat.for="badge of blockChainState.badges" tooltip="value:${badge.name};position:bottom" src.bind="badge.imageUrl" size="32"></k-avatar>
      </k-avatar-group>
      <k-button ref="accountButton" type="utility-dark" icon="account_circle">${blockChainState.connectedWalletAddress | smallHexString}</k-button>
      <k-icon-button if.bind="pendingTransactions === 0" ref="activityButton" type="utility-dark" name="electric_bolt"></k-icon-button>
      <k-icon-button else ref="activityButton" type="utility-dark">
        <k-spinner size="20" thickness="6" color="var(--primary)">
          ${pendingTransactions}
        </k-spinner>
      </k-icon-button>
    </k-stack>
  </div>
</k-app-bar>
<badge-menu target.bind="badgeGroup"></badge-menu>
<account-menu target.bind="accountButton"></account-menu>
<activity-menu target.bind="activityButton"></activity-menu>
